(this.webpackJsonpbookshop=this.webpackJsonpbookshop||[]).push([[0],{48:function(e,t,c){},61:function(e,t,c){},63:function(e,t,c){},74:function(e,t,c){},77:function(e,t,c){},78:function(e,t,c){},79:function(e,t,c){},80:function(e,t,c){},81:function(e,t,c){},82:function(e,t,c){"use strict";c.r(t);var n=c(2),r=c.n(n),s=c(28),a=c.n(s),i=(c(61),c(10)),l=c(22),o=c.n(l),j=c(27),u=c(8),d=c.p+"static/media/bars-solid.e8db7520.svg",b=c.p+"static/media/times-solid.ea7c95d7.svg",O=c.p+"static/media/shopping-cart-solid.d146d6c3.svg",h=c(9),p=(c(63),c(44)),x=(c(64),c(67),c(83),p.a.initializeApp({apiKey:"AIzaSyBWxbm3DPr5HqxNRZERWEEJoWHgtwEUMS0",authDomain:"fir-react-d5690.firebaseapp.com",databaseURL:"https://fir-react-d5690-default-rtdb.firebaseio.com",projectId:"fir-react-d5690",storageBucket:"fir-react-d5690.appspot.com",messagingSenderId:"230751563400",appId:"1:230751563400:web:a0b5d012993c6b2378b93d"})),f=x.auth(),m=p.a.firestore(),v=x,g=c(3),N=r.a.createContext();function y(){return Object(n.useContext)(N)}function C(e){var t=e.children,c=Object(n.useState)(),r=Object(u.a)(c,2),s=r[0],a=r[1],i=Object(n.useState)(!0),l=Object(u.a)(i,2),o=l[0],j=l[1];Object(n.useEffect)((function(){return f.onAuthStateChanged((function(e){a(e),j(!1)}))}),[]);var d={currentUser:s,login:function(e,t){return f.signInWithEmailAndPassword(e,t)},registration:function(e,t){return f.createUserWithEmailAndPassword(e,t)},logout:function(){return f.signOut()}};return Object(g.jsx)(N.Provider,{value:d,children:!o&&t})}var k=r.a.createContext();function w(){return Object(n.useContext)(k)}function S(e){var t=e.children,c=Object(n.useState)([]),r=Object(u.a)(c,2),s=r[0],a=r[1],i=Object(n.useState)(0),l=Object(u.a)(i,2),o=l[0],j=l[1],d=Object(n.useState)([]),b=Object(u.a)(d,2),O=b[0],h=b[1],p=Object(n.useState)(0),x=Object(u.a)(p,2),f=x[0],m=x[1],N=y().currentUser,C=Object(n.useState)([]),w=Object(u.a)(C,2),S=w[0],E=w[1],q=Object(n.useState)(0),R=Object(u.a)(q,2),I=R[0],P=R[1],M=0;M=null===S?0:I/Object.keys(S).length,Object(n.useEffect)((function(){v.database().ref("products").on("value",(function(e){var t=[];e.forEach((function(e){t.push({id:e.key,title:e.val().title,image:e.val().image,description:e.val().description,content:e.val().content,price:e.val().price,quantity:e.val().quantity})})),a(t)}))}),[]),Object(n.useEffect)((function(){N?v.database().ref("cart/"+N.uid+"/products").on("value",(function(e){var t=0,c=0;e.forEach((function(e){t+=e.val().quantity,c+=e.val().price*e.val().quantity})),j(t),m(c)})):(j(0),m(0))}));var U={products:s,userCart:O,addToCart:function(e){if(N){var t=O.find((function(t){return e.id===t.id}));t?v.database().ref("cart/"+N.uid+"/products/"+t.productId).update({quantity:t.quantity+=1}):v.database().ref("cart/"+N.uid+"/products").push(e)}},quantity:o,increaseItem:function(e){N&&v.database().ref("cart/"+N.uid+"/products/"+e.productId).update({quantity:e.quantity+=1})},decreaseItem:function(e){N&&e.quantity>1&&v.database().ref("cart/"+N.uid+"/products/"+e.productId).update({quantity:e.quantity-=1})},deleteItem:function(e){N&&v.database().ref("cart/"+N.uid+"/products/"+e.productId).remove()},totalAmount:f,setUserCart:h,getUserCart:function(){N?v.database().ref("cart/"+N.uid+"/products").on("value",(function(e){var t=[];e.forEach((function(e){t.push({productId:e.key,id:e.val().id,title:e.val().title,image:e.val().image,price:e.val().price,quantity:e.val().quantity,description:e.val().description,content:e.val().content})})),h(t)})):h([])},rating:M,getUsersRating:function(e){v.database().ref("products/"+e+"/users-rate/").on("value",(function(e){var t=0;e.forEach((function(e){t+=e.val().rating})),P(t),E(e.val())}))}};return Object(g.jsx)(k.Provider,{value:U,children:t})}function E(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),c=t[0],r=t[1],s=y(),a=s.currentUser,l=s.logout,p=Object(h.g)(),x=w(),f=x.quantity,m=x.setUserCart;function v(){r(!c)}function N(){return(N=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l();case 3:m([]),p.push("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(g.jsxs)("header",{children:[Object(g.jsx)("div",{className:"menu",onClick:v,children:Object(g.jsx)("img",{src:d,alt:"",width:"20"})}),Object(g.jsx)("div",{className:"logo",children:Object(g.jsx)("h1",{children:Object(g.jsx)(i.b,{to:"/",children:"Book Store"})})}),Object(g.jsxs)("nav",{children:[Object(g.jsxs)("ul",{className:c?"toggle":"",children:[Object(g.jsx)("li",{children:Object(g.jsx)(i.b,{to:"/",replace:!0,children:"Home"})}),Object(g.jsx)("li",{children:Object(g.jsx)(i.b,{to:"/product",replace:!0,children:"Product"})}),Object(g.jsx)("li",{children:Object(g.jsx)(i.b,{to:"/order",replace:!0,children:"My orders"})}),Object(g.jsx)("li",{children:a?Object(g.jsx)("button",{onClick:function(){return N.apply(this,arguments)},className:"logoutBtn",children:"Log out"}):Object(g.jsx)(i.b,{to:"/login",replace:!0,children:"Login / Register"})}),Object(g.jsx)("li",{children:Object(g.jsx)(i.b,{to:"/profile",replace:!0,children:"Profile"})}),Object(g.jsx)("li",{className:"close",onClick:v,children:Object(g.jsx)("img",{src:b,alt:"",width:"20"})})]}),Object(g.jsxs)("div",{className:"nav-cart",children:[Object(g.jsx)("span",{children:f}),Object(g.jsx)(i.b,{to:"/cart",children:Object(g.jsx)("img",{src:O,alt:"",width:"20"})})]})]})]})}c(74);function q(){var e=w(),t=e.products,c=e.addToCart,r=y().currentUser,s=Object(h.g)(),a=Object(n.useState)(""),l=Object(u.a)(a,2),o=l[0],j=l[1];function d(){s.push("/login")}return Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"searchForBook",children:Object(g.jsx)("input",{type:"text",onChange:function(e){j(e.target.value)},placeholder:"Search..."})}),Object(g.jsx)("div",{id:"product",children:t.filter((function(e){return""===o||e.title.toLowerCase().includes(o.toLowerCase())?e:void 0})).map((function(e){return Object(g.jsxs)("div",{className:"card",children:[Object(g.jsx)(i.b,{to:"/product/".concat(e.id),children:Object(g.jsx)("img",{src:e.image,alt:""})}),Object(g.jsxs)("div",{className:"content",children:[Object(g.jsx)("h3",{children:Object(g.jsx)(i.b,{to:"/product/".concat(e.id),children:e.title})}),Object(g.jsxs)("span",{children:["$",e.price]}),Object(g.jsx)("p",{children:e.description})]}),Object(g.jsx)("button",{onClick:r?function(){return c(e)}:d,children:"Add to cart"})]},e.id?e.id:1)}))})]})}c(48);var R=c(32),I=c(31);function P(e){var t=e.fill,c=void 0===t?"none":t;return Object(g.jsx)("div",{className:"rate",children:Object(g.jsx)(I.a,{icon:R.c,color:c,size:"lg"})})}var M=function(e){var t=e.index,c=e.rating,r=e.hoverRating,s=e.onMouseEnter,a=e.onMouseLeave,i=e.onSaveRating,l=Object(n.useMemo)((function(){return r>=t||!r&&c>=t?"#D4AC0D":"none"}),[c,r,t]);return Object(g.jsx)("div",{className:"cursor-pointer",onMouseEnter:function(){return s(t)},onMouseLeave:function(){return a()},onClick:function(){return i(t)},children:Object(g.jsx)(P,{fill:l})})};function U(e){var t=Object(n.useState)([]),c=Object(u.a)(t,2),r=c[0],s=c[1],a=e.match.params.id,i=w(),l=i.addToCart,o=i.rating,j=i.getUsersRating,d=y().currentUser,b=Object(h.g)();function O(){b.push("/login")}Object(n.useEffect)((function(){a&&v.database().ref("products/"+a).once("value",(function(e){var t=[];t.push(e.val()),s(t)})),j(a)}),[]);var p=Object(n.useState)(0),x=Object(u.a)(p,2),f=x[0],m=x[1],N=function(e){m(e)},C=function(){m(0)},k=function(e){console.log(o),d?v.database().ref("products/"+a+"/users-rate/"+d.uid+"/").update({rating:e}):O()};return Object(g.jsx)(g.Fragment,{children:r.map((function(e){return Object(g.jsxs)("div",{className:"details",children:[Object(g.jsx)("img",{src:e.image,alt:""}),Object(g.jsxs)("div",{className:"box",children:[Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("h2",{children:e.title}),Object(g.jsxs)("span",{children:["$",e.price]})]}),Object(g.jsx)("p",{children:e.description}),Object(g.jsx)("p",{children:e.content}),Object(g.jsx)("button",{className:"cart",onClick:d?function(){return l(r)}:O,children:"Add to Cart"}),Object(g.jsx)("div",{className:"flex",children:[1,2,3,4,5].map((function(e,t){return Object(g.jsx)(M,{index:e,rating:o,hoverRating:f,onMouseEnter:N,onMouseLeave:C,onSaveRating:k},t)}))})]})]},e.id?e.id:1)}))})}var T=c(100),L=c(101);function _(e){var t=Object(n.useRef)(),c=Object(n.useRef)(),r=Object(n.useRef)(),s=Object(n.useRef)(),a=Object(n.useRef)(),i=y().registration,l=Object(n.useState)(""),d=Object(u.a)(l,2),b=d[0],O=d[1],p=Object(h.g)(),x=Object(n.useState)(!1),f=Object(u.a)(x,2),v=f[0],N=f[1];function C(){return(C=Object(j.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),s.current.value===a.current.value){e.next=3;break}return e.abrupt("return",O("Password do not match!!!"));case 3:if(""!==t.current.value){e.next=5;break}return e.abrupt("return",O("Enter your name!!!"));case 5:if(""!==c.current.value){e.next=7;break}return e.abrupt("return",O("Enter your last name!!!"));case 7:return e.prev=7,O(""),N(!0),e.next=12,i(r.current.value,s.current.value).then(function(){var e=Object(j.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.collection("users").doc(n.user.uid).set({name:t.current.value,secondname:c.current.value,email:r.current.value,userPhoto:""});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 12:p.push("/"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(7),O(e.t0.message),N(!1);case 19:case"end":return e.stop()}}),e,null,[[7,15]])})))).apply(this,arguments)}return Object(g.jsxs)("form",{className:"login-wrapper",onSubmit:function(e){return C.apply(this,arguments)},children:[Object(g.jsx)("h1",{children:"Registration"}),Object(g.jsx)("div",{className:"errorMsg",children:b&&Object(g.jsxs)(T.a,{severity:"error",children:[Object(g.jsx)(L.a,{children:"Error"}),b]})}),Object(g.jsxs)("div",{className:"loginContainer",children:[Object(g.jsx)("label",{className:"labels",children:"First Name"}),Object(g.jsx)("input",{type:"text",className:"login-input",ref:t}),Object(g.jsx)("label",{className:"labels",children:"Second Name"}),Object(g.jsx)("input",{type:"text",className:"login-input",ref:c}),Object(g.jsx)("label",{className:"labels",children:"Email"}),Object(g.jsx)("input",{type:"text",className:"login-input",ref:r}),Object(g.jsx)("label",{className:"labels",children:"Password"}),Object(g.jsx)("input",{type:"password",className:"login-input",ref:s}),Object(g.jsx)("label",{className:"labels",children:"Confirm your password"}),Object(g.jsx)("input",{type:"password",className:"login-input",ref:a}),Object(g.jsxs)("div",{className:"buttons",children:[Object(g.jsx)("button",{className:"login-button",disabled:v,type:"submit",children:"Registration"}),Object(g.jsxs)("p",{className:"HaveAcc",children:["Have an account ?",Object(g.jsx)("span",{onClick:function(){e.setState({show:!0})},className:"signin",children:"Sign in"})]})]})]})]})}c(77);function A(){var e=Object(n.useState)(!0),t=Object(u.a)(e,2),c=t[0],r=t[1],s=Object(n.useRef)(),a=Object(n.useRef)(),i=Object(n.useState)(""),l=Object(u.a)(i,2),d=l[0],b=l[1],O=y().login,p=Object(n.useState)(!1),x=Object(u.a)(p,2),f=x[0],m=x[1],v=Object(h.g)();function N(){return(N=Object(j.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,b(""),m(!0),e.next=6,O(s.current.value,a.current.value);case 6:v.push("/"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),b(e.t0.message),m(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return Object(g.jsx)("div",{children:c?Object(g.jsxs)("form",{className:"login-wrapper",onSubmit:function(e){return N.apply(this,arguments)},children:[Object(g.jsx)("h1",{children:"Please Login"}),Object(g.jsx)("div",{className:"errorMsg",children:d&&Object(g.jsxs)(T.a,{severity:"error",children:[Object(g.jsx)(L.a,{children:"Something went wrong please try again"}),d]})}),Object(g.jsxs)("div",{className:"loginContainer",children:[Object(g.jsx)("label",{className:"labels",children:"Email"}),Object(g.jsx)("input",{type:"text",className:"login-input",ref:s,required:!0}),Object(g.jsx)("label",{className:"labels",children:"Password"}),Object(g.jsx)("input",{type:"password",className:"login-input",ref:a,required:!0}),Object(g.jsxs)("div",{className:"buttons",children:[Object(g.jsx)("button",{className:"login-button",disabled:f,type:"submit",children:"Login"}),Object(g.jsx)("button",{className:"login-button",type:"button",onClick:function(){r(!1)},children:"Registration"})]})]})]}):Object(g.jsx)(_,{setState:function(e){return r(e)}})})}var D=c(38),F=c(39),B=c(41),H=c(40),W=(c(78),function(e){Object(B.a)(c,e);var t=Object(H.a)(c);function c(){return Object(D.a)(this,c),t.apply(this,arguments)}return Object(F.a)(c,[{key:"render",value:function(){return Object(g.jsxs)("div",{className:"main-inf",children:[Object(g.jsxs)("div",{className:"inf",children:[Object(g.jsx)("h1",{children:"My profile"}),Object(g.jsx)("br",{}),Object(g.jsxs)("div",{className:"label-1",children:[Object(g.jsx)("label",{className:"label-1-text",children:"Email:"})," ",Object(g.jsx)("a",{children:"Test"})," ",Object(g.jsx)("br",{}),Object(g.jsx)("label",{className:"label-1-text",children:"Password:"}),"  ",Object(g.jsx)("a",{children:"Te**"})," ",Object(g.jsx)("br",{}),Object(g.jsx)("label",{className:"label-1-text",children:"First name:"})," ",Object(g.jsx)("a",{children:"Test"}),Object(g.jsx)("br",{}),Object(g.jsx)("label",{className:"label-1-text",children:"Last name:"})," ",Object(g.jsx)("a",{children:"Test-1"}),Object(g.jsx)("br",{}),Object(g.jsx)("label",{className:"label-1-text",children:"Phone number:"}),"  ",Object(g.jsx)("a",{children:"+372 test"}),Object(g.jsx)("br",{})]}),Object(g.jsx)("button",{className:"log-button",children:"Change password"}),Object(g.jsx)("button",{className:"login-button",children:"Change information"}),Object(g.jsx)("br",{}),Object(g.jsx)("hr",{}),Object(g.jsx)("h1",{children:"My orders"}),Object(g.jsx)("p",{children:"3 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(g.jsx)("button",{className:"login-button",children:"More details"}),Object(g.jsx)("hr",{}),Object(g.jsx)("h1",{children:Object(g.jsx)("strong",{children:Object(g.jsx)("p",{children:"Expenses: -40.99$"})})})]}),Object(g.jsxs)("div",{className:"main-prof",children:[Object(g.jsx)("img",{src:"https://img.thedailybeast.com/image/upload/c_crop,d_placeholder_euli9k,h_1440,w_2560,x_0,y_0/dpr_1.5/c_limit,w_1044/fl_lossy,q_auto/v1531451526/180712-Weill--The-Creator-of-Pepe-hero_uionjj",width:"450",height:"400"}),Object(g.jsx)("br",{}),Object(g.jsxs)("div",{className:"prof-button",children:[Object(g.jsx)("button",{className:"login-button",children:"Add picture"}),Object(g.jsx)("h2",{children:"Balance"}),Object(g.jsx)("h2",{children:"0.00$"}),Object(g.jsx)("button",{className:"login-button",children:"Logout"})]})]})]})}}]),c}(n.Component));c(79);function z(){var e=w(),t=e.userCart,c=e.increaseItem,r=e.decreaseItem,s=e.deleteItem,a=e.totalAmount,l=e.getUserCart;return Object(n.useEffect)((function(){l()}),[]),t.length>0?Object(g.jsxs)(g.Fragment,{children:[t.map((function(e){return Object(g.jsxs)("div",{className:"details cart",children:[Object(g.jsx)("img",{src:e.image,alt:""}),Object(g.jsxs)("div",{className:"box",children:[Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("h2",{children:e.title}),Object(g.jsxs)("span",{children:["$",Math.fround(e.price*e.quantity).toFixed(2)]})]}),Object(g.jsx)("p",{children:e.description}),Object(g.jsx)("p",{children:e.content}),Object(g.jsxs)("div",{className:"amount",children:[Object(g.jsx)(I.a,{icon:R.a,onClick:function(){return r(e)},className:"count",size:"sm"}),Object(g.jsx)("span",{children:e.quantity}),Object(g.jsx)(I.a,{icon:R.b,onClick:function(){return c(e)},className:"count",size:"sm"})]})]}),Object(g.jsx)("div",{className:"delete",children:Object(g.jsx)("button",{onClick:function(){return s(e)},className:"btnDelete",children:"Delete"})})]},e.id?e.id:1)})),Object(g.jsxs)("div",{className:"total",children:[Object(g.jsx)(i.b,{to:"/",children:"Payment"}),Object(g.jsxs)("h3",{children:["Total:",Math.fround(a).toFixed(2)]})]})]}):Object(g.jsx)("div",{className:"emptyCart",children:Object(g.jsx)(i.b,{to:"/product",children:Object(g.jsx)("h2",{className:"nothingHere",children:"Back to books shopping"})})})}c(80);function $(){var e=w(),t=e.getUserCart;e.products;return Object(n.useEffect)((function(){t()}),[]),Object(g.jsx)("div",{children:"Dashboard"})}c(81);var J=function(e){Object(B.a)(c,e);var t=Object(H.a)(c);function c(e){var n;return Object(D.a)(this,c),(n=t.call(this,e)).state={orders:[{number:"6453453",status:"in progress",date:"24.05.2021",sum:"35\u20ac"},{number:"5654546",status:"completed",date:"15.05.2021",sum:"45\u20ac"},{number:"6345545",status:"completed",date:"14.05.2021",sum:"25\u20ac"},{number:"6574345",status:"completed",date:"23.04.2021",sum:"15\u20ac"}]},n}return Object(F.a)(c,[{key:"renderTableData",value:function(){return this.state.orders.map((function(e,t){var c=e.number,n=e.status,r=e.date,s=e.sum;return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:c}),Object(g.jsx)("td",{children:n}),Object(g.jsx)("td",{children:r}),Object(g.jsx)("td",{children:s})]},c)}))}},{key:"renderTableHeader",value:function(){return Object.keys(this.state.orders[0]).map((function(e,t){return Object(g.jsx)("th",{children:e.toUpperCase()},t)}))}},{key:"render",value:function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{id:"title",children:"Orders"}),Object(g.jsx)("table",{id:"order",children:Object(g.jsxs)("tbody",{children:[Object(g.jsx)("tr",{children:this.renderTableHeader()}),this.renderTableData()]})})]})}}]),c}(n.Component);function K(){var e=y().currentUser,t=Object(h.h)();return Object(g.jsx)("section",{children:Object(g.jsxs)(h.d,{children:[Object(g.jsx)(h.b,{exact:!0,path:"/",component:$}),Object(g.jsx)(h.b,{exact:!0,path:"/product",component:q}),Object(g.jsx)(h.b,{path:"/product/:id",component:U}),e&&"/login"===t.pathname?Object(g.jsx)(h.a,{to:"/"}):Object(g.jsx)(h.b,{exact:!0,path:"/login",component:A}),Object(g.jsx)(h.b,{path:"/profile",component:W}),Object(g.jsx)(h.b,{path:"/cart",component:z}),Object(g.jsx)(h.b,{path:"/order",component:J})]})})}var Z=function(){return Object(g.jsx)(C,{children:Object(g.jsx)(S,{children:Object(g.jsx)("div",{className:"app",children:Object(g.jsxs)(i.a,{children:[Object(g.jsx)(E,{}),Object(g.jsx)(K,{})]})})})})},G=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,102)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;c(e),n(e),r(e),s(e),a(e)}))};a.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(Z,{})}),document.getElementById("root")),G()}},[[82,1,2]]]);
//# sourceMappingURL=main.3e37a31e.chunk.js.map