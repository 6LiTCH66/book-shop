(this.webpackJsonpbookshop=this.webpackJsonpbookshop||[]).push([[0],{60:function(e,t,c){},62:function(e,t,c){},73:function(e,t,c){},74:function(e,t,c){},75:function(e,t,c){},76:function(e,t,c){},77:function(e,t,c){},80:function(e,t,c){},81:function(e,t,c){"use strict";c.r(t);var n=c(2),r=c.n(n),a=c(28),s=c.n(a),i=(c(60),c(11)),o=c(22),u=c.n(o),l=c(27),j=c(12),d=c.p+"static/media/bars-solid.e8db7520.svg",b=c.p+"static/media/times-solid.ea7c95d7.svg",p=c.p+"static/media/shopping-cart-solid.d146d6c3.svg",O=c(8),h=(c(62),c(42)),x=(c(63),c(66),c(82),h.a.initializeApp({apiKey:"AIzaSyBWxbm3DPr5HqxNRZERWEEJoWHgtwEUMS0",authDomain:"fir-react-d5690.firebaseapp.com",databaseURL:"https://fir-react-d5690-default-rtdb.firebaseio.com",projectId:"fir-react-d5690",storageBucket:"fir-react-d5690.appspot.com",messagingSenderId:"230751563400",appId:"1:230751563400:web:a0b5d012993c6b2378b93d"})),f=x.auth(),m=h.a.firestore(),v=x,g=c(3),y=r.a.createContext();function N(){return Object(n.useContext)(y)}function k(e){var t=e.children,c=Object(n.useState)(),r=Object(j.a)(c,2),a=r[0],s=r[1],i=Object(n.useState)(!0),o=Object(j.a)(i,2),u=o[0],l=o[1];Object(n.useEffect)((function(){return f.onAuthStateChanged((function(e){s(e),l(!1)}))}),[]);var d={currentUser:a,login:function(e,t){return f.signInWithEmailAndPassword(e,t)},registration:function(e,t){return f.createUserWithEmailAndPassword(e,t)},logout:function(){return f.signOut()}};return Object(g.jsx)(y.Provider,{value:d,children:!u&&t})}var C=r.a.createContext();function w(){return Object(n.useContext)(C)}function S(e){var t=e.children,c=Object(n.useState)([]),r=Object(j.a)(c,2),a=r[0],s=r[1],i=Object(n.useState)(0),o=Object(j.a)(i,2),u=o[0],l=o[1],d=Object(n.useState)([]),b=Object(j.a)(d,2),p=b[0],O=b[1],h=Object(n.useState)(0),x=Object(j.a)(h,2),f=x[0],m=x[1],y=N().currentUser;Object(n.useEffect)((function(){v.database().ref("products").on("value",(function(e){var t=[];e.forEach((function(e){t.push({id:e.key,title:e.val().title,image:e.val().image,description:e.val().description,content:e.val().content,price:e.val().price,quantity:e.val().quantity})})),s(t)}))}),[]),Object(n.useEffect)((function(){y?v.database().ref("cart/"+y.uid+"/products").on("value",(function(e){var t=0,c=0;e.forEach((function(e){t+=e.val().quantity,c+=e.val().price*e.val().quantity})),l(t),m(c)})):(l(0),m(0))}));var k={products:a,userCart:p,addToCart:function(e){if(y){var t=p.find((function(t){return e.id===t.id}));t?v.database().ref("cart/"+y.uid+"/products/"+t.productId).update({quantity:t.quantity+=1}):v.database().ref("cart/"+y.uid+"/products").push(e)}else alert("You need to login!!!")},quantity:u,increaseItem:function(e){y&&v.database().ref("cart/"+y.uid+"/products/"+e.productId).update({quantity:e.quantity+=1})},decreaseItem:function(e){y&&e.quantity>1&&v.database().ref("cart/"+y.uid+"/products/"+e.productId).update({quantity:e.quantity-=1})},deleteItem:function(e){y&&v.database().ref("cart/"+y.uid+"/products/"+e.productId).remove()},totalAmount:f,setUserCart:O,getUserCart:function(){y?v.database().ref("cart/"+y.uid+"/products").on("value",(function(e){var t=[];e.forEach((function(e){t.push({productId:e.key,id:e.val().id,title:e.val().title,image:e.val().image,price:e.val().price,quantity:e.val().quantity,description:e.val().description,content:e.val().content})})),O(t)})):(O([]),console.log("no data user"))}};return Object(g.jsx)(C.Provider,{value:k,children:t})}function q(){var e=Object(n.useState)(!1),t=Object(j.a)(e,2),c=t[0],r=t[1],a=N(),s=a.currentUser,o=a.logout,h=Object(O.g)(),x=w(),f=x.quantity,m=x.setUserCart;function v(){r(!c)}function y(){return(y=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o();case 3:m([]),h.push("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(g.jsxs)("header",{children:[Object(g.jsx)("div",{className:"menu",onClick:v,children:Object(g.jsx)("img",{src:d,alt:"",width:"20"})}),Object(g.jsx)("div",{className:"logo",children:Object(g.jsx)("h1",{children:Object(g.jsx)(i.b,{to:"/",children:"Book Store"})})}),Object(g.jsxs)("nav",{children:[Object(g.jsxs)("ul",{className:c?"toggle":"",children:[Object(g.jsx)("li",{children:Object(g.jsx)(i.b,{to:"/",replace:!0,children:"Home"})}),Object(g.jsx)("li",{children:Object(g.jsx)(i.b,{to:"/product",replace:!0,children:"Product"})}),Object(g.jsx)("li",{children:Object(g.jsx)(i.b,{to:"/order",replace:!0,children:"My orders"})}),Object(g.jsx)("li",{children:s?Object(g.jsx)("button",{onClick:function(){return y.apply(this,arguments)},className:"logoutBtn",children:"Log out"}):Object(g.jsx)(i.b,{to:"/login",replace:!0,children:"Login / Register"})}),Object(g.jsx)("li",{children:Object(g.jsx)(i.b,{to:"/profile",replace:!0,children:"Profile"})}),Object(g.jsx)("li",{className:"close",onClick:v,children:Object(g.jsx)("img",{src:b,alt:"",width:"20"})})]}),Object(g.jsxs)("div",{className:"nav-cart",children:[Object(g.jsx)("span",{children:f}),Object(g.jsx)(i.b,{to:"/cart",children:Object(g.jsx)("img",{src:p,alt:"",width:"20"})})]})]})]})}c(73);function E(){var e=w(),t=e.products,c=e.addToCart;return Object(g.jsx)("div",{id:"product",children:t.map((function(e){return Object(g.jsxs)("div",{className:"card",children:[Object(g.jsx)(i.b,{to:"/product/".concat(e.id),children:Object(g.jsx)("img",{src:e.image,alt:""})}),Object(g.jsxs)("div",{className:"content",children:[Object(g.jsx)("h3",{children:Object(g.jsx)(i.b,{to:"/product/".concat(e.id),children:e.title})}),Object(g.jsxs)("span",{children:["$",e.price]}),Object(g.jsx)("p",{children:e.description})]}),Object(g.jsx)("button",{onClick:function(){return c(e)},children:"Add to card"})]},e.id?e.id:1)}))})}c(74);function I(e){var t=Object(n.useState)([]),c=Object(j.a)(t,2),r=c[0],a=c[1],s=e.match.params.id,i=w().addToCart;return Object(n.useEffect)((function(){s&&v.database().ref("products/"+s).once("value",(function(e){var t=[];t.push(e.val()),a(t)}))}),[]),Object(g.jsx)(g.Fragment,{children:r.map((function(e){return Object(g.jsxs)("div",{className:"details",children:[Object(g.jsx)("img",{src:e.image,alt:""}),Object(g.jsxs)("div",{className:"box",children:[Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("h2",{children:e.title}),Object(g.jsxs)("span",{children:["$",e.price]})]}),Object(g.jsx)("p",{children:e.description}),Object(g.jsx)("p",{children:e.content}),Object(g.jsx)("button",{className:"cart",onClick:function(){return i(e)},children:"Add to Cart"})]})]},e.id?e.id:1)}))})}var P=c(99),R=c(100);function U(e){var t=Object(n.useRef)(),c=Object(n.useRef)(),r=Object(n.useRef)(),a=Object(n.useRef)(),s=Object(n.useRef)(),i=N().registration,o=Object(n.useState)(""),d=Object(j.a)(o,2),b=d[0],p=d[1],h=Object(O.g)(),x=Object(n.useState)(!1),f=Object(j.a)(x,2),v=f[0],y=f[1];function k(){return(k=Object(l.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a.current.value===s.current.value){e.next=3;break}return e.abrupt("return",p("Password do not match!!!"));case 3:if(""!==t.current.value){e.next=5;break}return e.abrupt("return",p("Enter your name!!!"));case 5:if(""!==c.current.value){e.next=7;break}return e.abrupt("return",p("Enter your last name!!!"));case 7:return e.prev=7,p(""),y(!0),e.next=12,i(r.current.value,a.current.value).then(function(){var e=Object(l.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.collection("users").doc(n.user.uid).set({name:t.current.value,secondname:c.current.value,email:r.current.value,userPhoto:""});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 12:h.push("/"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(7),p(e.t0.message),y(!1);case 19:case"end":return e.stop()}}),e,null,[[7,15]])})))).apply(this,arguments)}return Object(g.jsxs)("form",{className:"login-wrapper",onSubmit:function(e){return k.apply(this,arguments)},children:[Object(g.jsx)("h1",{children:"Registration"}),Object(g.jsx)("div",{className:"errorMsg",children:b&&Object(g.jsxs)(P.a,{severity:"error",children:[Object(g.jsx)(R.a,{children:"Error"}),b]})}),Object(g.jsxs)("div",{className:"loginContainer",children:[Object(g.jsx)("label",{className:"labels",children:"First Name"}),Object(g.jsx)("input",{type:"text",className:"login-input",ref:t}),Object(g.jsx)("label",{className:"labels",children:"Second Name"}),Object(g.jsx)("input",{type:"text",className:"login-input",ref:c}),Object(g.jsx)("label",{className:"labels",children:"Email"}),Object(g.jsx)("input",{type:"text",className:"login-input",ref:r}),Object(g.jsx)("label",{className:"labels",children:"Password"}),Object(g.jsx)("input",{type:"password",className:"login-input",ref:a}),Object(g.jsx)("label",{className:"labels",children:"Confirm your password"}),Object(g.jsx)("input",{type:"password",className:"login-input",ref:s}),Object(g.jsxs)("div",{className:"buttons",children:[Object(g.jsx)("button",{className:"login-button",disabled:v,type:"submit",children:"Registration"}),Object(g.jsxs)("p",{className:"HaveAcc",children:["Have an account ?",Object(g.jsx)("span",{onClick:function(){e.setState({show:!0})},className:"signin",children:"Sign in"})]})]})]})]})}c(75);function A(){var e=Object(n.useState)(!0),t=Object(j.a)(e,2),c=t[0],r=t[1],a=Object(n.useRef)(),s=Object(n.useRef)(),i=Object(n.useState)(""),o=Object(j.a)(i,2),d=o[0],b=o[1],p=N().login,h=Object(n.useState)(!1),x=Object(j.a)(h,2),f=x[0],m=x[1],v=Object(O.g)();function y(){return(y=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,b(""),m(!0),e.next=6,p(a.current.value,s.current.value);case 6:v.push("/"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),b(e.t0.message),m(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return Object(g.jsx)("div",{children:c?Object(g.jsxs)("form",{className:"login-wrapper",onSubmit:function(e){return y.apply(this,arguments)},children:[Object(g.jsx)("h1",{children:"Please Login"}),Object(g.jsx)("div",{className:"errorMsg",children:d&&Object(g.jsxs)(P.a,{severity:"error",children:[Object(g.jsx)(R.a,{children:"Something went wrong please try again"}),d]})}),Object(g.jsxs)("div",{className:"loginContainer",children:[Object(g.jsx)("label",{className:"labels",children:"Email"}),Object(g.jsx)("input",{type:"text",className:"login-input",ref:a,required:!0}),Object(g.jsx)("label",{className:"labels",children:"Password"}),Object(g.jsx)("input",{type:"password",className:"login-input",ref:s,required:!0}),Object(g.jsxs)("div",{className:"buttons",children:[Object(g.jsx)("button",{className:"login-button",disabled:f,type:"submit",children:"Login"}),Object(g.jsx)("button",{className:"login-button",type:"button",onClick:function(){r(!1)},children:"Registration"})]})]})]}):Object(g.jsx)(U,{setState:function(e){return r(e)}})})}var D=c(29),T=c(30),F=c(33),H=c(31),B=(c(76),function(e){Object(F.a)(c,e);var t=Object(H.a)(c);function c(){return Object(D.a)(this,c),t.apply(this,arguments)}return Object(T.a)(c,[{key:"render",value:function(){return Object(g.jsx)("div",{children:"Profile"})}}]),c}(n.Component)),L=(c(77),c(45)),M=c(46);function W(){var e=w(),t=e.userCart,c=e.increaseItem,r=e.decreaseItem,a=e.deleteItem,s=e.totalAmount,o=(e.quantity,e.getUserCart);return Object(n.useEffect)((function(){o()}),[]),t.length>0?Object(g.jsxs)(g.Fragment,{children:[t.map((function(e){return Object(g.jsxs)("div",{className:"details cart",children:[Object(g.jsx)("img",{src:e.image,alt:""}),Object(g.jsxs)("div",{className:"box",children:[Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("h2",{children:e.title}),Object(g.jsxs)("span",{children:["$",Math.fround(e.price*e.quantity).toFixed(2)]})]}),Object(g.jsx)("p",{children:e.description}),Object(g.jsx)("p",{children:e.content}),Object(g.jsxs)("div",{className:"amount",children:[Object(g.jsx)(L.a,{icon:M.a,onClick:function(){return r(e)},className:"count",size:"sm"}),Object(g.jsx)("span",{children:e.quantity}),Object(g.jsx)(L.a,{icon:M.b,onClick:function(){return c(e)},className:"count",size:"sm"})]})]}),Object(g.jsx)("div",{className:"delete",children:Object(g.jsx)("button",{onClick:function(){return a(e)},className:"btnDelete",children:"Delete"})})]},e.id?e.id:1)})),Object(g.jsxs)("div",{className:"total",children:[Object(g.jsx)(i.b,{to:"/",children:"Payment"}),Object(g.jsxs)("h3",{children:["Total:",Math.fround(s).toFixed(2)]})]})]}):Object(g.jsx)("div",{className:"emptyCart",children:Object(g.jsx)(i.b,{to:"/product",children:Object(g.jsx)("h2",{className:"nothingHere",children:"Back to books shopping"})})})}var z=function(e){Object(F.a)(c,e);var t=Object(H.a)(c);function c(){return Object(D.a)(this,c),t.apply(this,arguments)}return Object(T.a)(c,[{key:"render",value:function(){return Object(g.jsx)("div",{children:"Dashboard"})}}]),c}(n.Component),J=(c(80),function(e){Object(F.a)(c,e);var t=Object(H.a)(c);function c(e){var n;return Object(D.a)(this,c),(n=t.call(this,e)).state={orders:[{number:"6453453",status:"in progress",date:"24.05.2021",sum:"35\u20ac"},{number:"5654546",status:"completed",date:"15.05.2021",sum:"45\u20ac"},{number:"6345545",status:"completed",date:"14.05.2021",sum:"25\u20ac"},{number:"6574345",status:"completed",date:"23.04.2021",sum:"15\u20ac"}]},n}return Object(T.a)(c,[{key:"renderTableData",value:function(){return this.state.orders.map((function(e,t){var c=e.number,n=e.status,r=e.date,a=e.sum;return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:c}),Object(g.jsx)("td",{children:n}),Object(g.jsx)("td",{children:r}),Object(g.jsx)("td",{children:a})]},c)}))}},{key:"renderTableHeader",value:function(){return Object.keys(this.state.orders[0]).map((function(e,t){return Object(g.jsx)("th",{children:e.toUpperCase()},t)}))}},{key:"render",value:function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{id:"title",children:"Orders"}),Object(g.jsx)("table",{id:"order",children:Object(g.jsxs)("tbody",{children:[Object(g.jsx)("tr",{children:this.renderTableHeader()}),this.renderTableData()]})})]})}}]),c}(n.Component));function $(){var e=N().currentUser,t=Object(O.h)();return Object(g.jsx)("section",{children:Object(g.jsxs)(O.d,{children:[Object(g.jsx)(O.b,{exact:!0,path:"/",component:z}),Object(g.jsx)(O.b,{exact:!0,path:"/product",component:E}),Object(g.jsx)(O.b,{path:"/product/:id",component:I}),e&&"/login"===t.pathname?Object(g.jsx)(O.a,{to:"/"}):Object(g.jsx)(O.b,{exact:!0,path:"/login",component:A}),Object(g.jsx)(O.b,{path:"/profile",component:B}),Object(g.jsx)(O.b,{path:"/cart",component:W}),Object(g.jsx)(O.b,{path:"/order",component:J})]})})}var K=function(){return Object(g.jsx)(k,{children:Object(g.jsx)(S,{children:Object(g.jsx)("div",{className:"app",children:Object(g.jsxs)(i.a,{children:[Object(g.jsx)(q,{}),Object(g.jsx)($,{})]})})})})},Y=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,101)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),n(e),r(e),a(e),s(e)}))};s.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(K,{})}),document.getElementById("root")),Y()}},[[81,1,2]]]);
//# sourceMappingURL=main.312e12ea.chunk.js.map